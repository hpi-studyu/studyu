version: '3'
services:
  app-selfhost:
    build:
      context: ../
      dockerfile: ./docker/Dockerfile
      args:
        FLUTTER_APP_FOLDER: app
        ENV: selfhost
    ports:
      - 8080:80
    networks:
      - studyu-net
    env_file:
      - ../flutter_common/lib/envs/.env.selfhost
  designer-selfhost:
    build:
      context: ../
      dockerfile: ./docker/Dockerfile
      args:
        FLUTTER_APP_FOLDER: designer
        ENV: selfhost
    ports:
      - 8081:80
    networks:
      - studyu-net
    env_file:
      - ../flutter_common/lib/envs/.env.selfhost
  designer2-selfhost:
    build:
      context: ../
      dockerfile: ./docker/Dockerfile
      args:
        FLUTTER_APP_FOLDER: designer_v2
        ENV: selfhost
    ports:
      - 8082:80
    networks:
      - studyu-net
    env_file:
      - ../flutter_common/lib/envs/.env.selfhost
networks:
  studyu-net:
      name: studyu_network
